%!TEX root = ../thesis.tex

\chapter{Discussion}
\label{ch:discussion}

There is nothing stopping a student to ignore everything we have done, and simply solve an assignment manually.
I.e., there is nothing enforcing a PR review.

What happens if a teacher creates two tasks with the same name?

There is a weakness in how we handle branches.
If someone pushes to a branch with a remote name that differs from the local name, we cannot know which local branch to check out.

The issue and task related code can easily be extended to also work on all student repositories.
The pull request part is more hard coded.
Can discuss any potential expansion to make it also work on regular student repositories.

Can maybe discuss the potential to have a more efficient way of testing things, such as webhook related stuff.
For example, I am currently hard coded into some of the db population functions, to facilitate testing.
Would be better if this was more independent. 
Could maybe have certain QF test GitHub users?

Should discuss that finding the linked issue by parsing the PR body limits what can be in it.
Can maybe instead be implemented as a regular expression search.

\section{Future Work}

Maybe more feedback if students do something wrong.
For example, if a student creates a pull request without correctly linking the issue, they should probably be immediately made aware.
In this case, we could maybe comment on their pull request, stating this.
We could also support students linking issues late by listening to pull request body changed events, or something.
This avoids the need for students to recreate pull requests in case they fail.

\subsection{Checks API}

\subsection{Expanding Approval Process}
Pull requests can be approved. This has no impact on the assignment approval process. Can expand on it.

\subsection{GitHub App}
\label{section:github-app}

QF should probably be a GitHub app instead of Oauth app
Oauth app acts on behalf of a user, while app uses its own identity.
For example, with an Oauth app we cannot create pull requests and comments as QF, only as an authorized user in that org.
All issues that are created will be in the course creators name.
Also required for Checks API.
https://docs.github.com/en/developers/apps/getting-started-with-apps/differences-between-github-apps-and-oauth-apps
https://docs.github.com/en/developers/apps/getting-started-with-apps/about-apps

\section{Improvements}

TODO(espeland): Tasks currently have the following naming format: <assignment name>/<local task name>.
To map DBtasks and TRtasks, we do not explicitly need the assignment name to be a part of the whole task name,
given that we also map by assignment order.
Given that the score package only relies on the local task name, it would be better to confer to a single task name format.